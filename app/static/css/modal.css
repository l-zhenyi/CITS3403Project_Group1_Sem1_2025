/* --- START OF FILE modal.css --- */

/* ... (Previous CSS up to .modal-event-description) ... */

.modal-backdrop {
    position: fixed;
    inset: 0;
    background-color: rgba(30, 30, 35, 0.65);
    backdrop-filter: blur(20px) saturate(150%);
    -webkit-backdrop-filter: blur(20px) saturate(150%);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 30px;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0s linear 0.3s;
}

.modal-backdrop.visible {
    opacity: 1;
    visibility: visible;
    transition: opacity 0.3s ease, visibility 0s linear 0s;
}

.modal-content {
    position: relative;
    background: rgba(140, 140, 145, 0.7); /* Main modal glass */
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.25);
    border-radius: 18px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
    padding: 25px 35px;
    width: calc(100% - 60px);
    height: calc(100% - 60px);
    overflow: hidden; /* Clips content, .modal-body handles internal scroll */
    display: flex;
    flex-direction: column;
    color: #f0f0f5;
    transform: scale(0.95);
    transition: transform 0.3s ease, opacity 0.3s ease;
}

.modal-backdrop.visible .modal-content {
     transform: scale(1);
}

.modal-close-btn {
    position: absolute;
    top: 15px;
    right: 18px;
    background: none;
    border: none;
    font-size: 2.1rem;
    font-weight: 300;
    color: rgba(255, 255, 255, 0.7);
    cursor: pointer;
    padding: 0 5px;
    line-height: 1;
    z-index: 10; /* Above other modal content */
    transition: color 0.2s ease, transform 0.2s ease;
}
.modal-close-btn:hover {
    color: #fff;
    transform: scale(1.1);
}

/* Modal Header */
.modal-header {
    display: flex;
    align-items: center;
    gap: 20px;
    padding-bottom: 18px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    margin-bottom: 25px;
    flex-shrink: 0; /* Prevent header from shrinking */
}

.modal-event-image-small {
    width: 55px;
    height: 55px;
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background-color: rgba(255, 255, 255, 0.1); /* Placeholder bg */
}

.modal-title-group {
    flex-grow: 1;
}

.modal-header h2, #modal-event-title { /* Target both static H2 and editable title field */
    margin: 0 0 3px 0;
    font-size: 1.7rem;
    font-weight: 600;
    color: #fff;
    line-height: 1.2;
}
.modal-header p {
    margin: 0;
    font-size: 0.95rem;
    color: #c5c5cc;
}
#modal-group-name {
    font-weight: 500;
}

/* Modal Body */
.modal-body {
    display: flex;
    flex-grow: 1; /* Takes remaining space */
    gap: 35px;
    overflow-y: auto; /* Enables scrolling ONLY for the body */
    padding: 5px 10px 5px 10px; /* Add a bit more padding to body L/R to help with outline visibility */
    min-height: 0; /* CRITICAL for flex-grow + overflow */
}
/* Scrollbar Styling */
.modal-body::-webkit-scrollbar { width: 8px; }
.modal-body::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.08); border-radius: 10px; }
.modal-body::-webkit-scrollbar-thumb { background-color: rgba(255, 255, 255, 0.35); border-radius: 10px; border: 2px solid transparent; background-clip: content-box; }
.modal-body::-webkit-scrollbar-thumb:hover { background-color: rgba(255, 255, 255, 0.5); }
.modal-body { scrollbar-width: thin; scrollbar-color: rgba(255, 255, 255, 0.35) rgba(255, 255, 255, 0.08); }


.modal-col {
    display: flex;
    flex-direction: column;
    gap: 25px;
}
.modal-col-details {
    flex: 1 1 62%;
    min-width: 0; /* Prevent flex item from overflowing */
    display: flex; /* Enable flex context for children */
    flex-direction: column;
}
.modal-col-rsvps {
    flex: 1 1 38%;
    border-left: 1px solid rgba(255, 255, 255, 0.2);
    padding-left: 35px;
}

.modal-detail-section h3 {
    font-size: 1.15rem;
    font-weight: 500;
    color: #fff;
    margin-bottom: 15px;
    margin-top: 0;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.15);
}

.modal-detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 18px;
}

.detail-item {
    background: rgba(255, 255, 255, 0.05); /* Subtle background for items */
    padding: 10px 12px;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}
.detail-label {
    display: block;
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.65);
    margin-bottom: 4px;
    font-weight: 500;
}
.detail-item span:not(.detail-label) { /* Targets the value span */
    font-size: 0.95rem;
    color: #f0f0f5;
}

.modal-description-section {
    display: flex;
    flex-direction: column;
    flex-grow: 1; 
    min-height: 0; 
}
#modal-description-wrapper { /* This is the .editable-field for description */
    position: relative;
    flex-grow: 1; 
    min-height: 100px; 
    overflow-y: auto;  
    border-radius: 8px; 
    display: flex; 
    flex-direction: column;
    margin: 5px; /* ADDED: Small margin around the wrapper itself */
                 /* This gives space for its own outline-offset to draw */
    outline-offset: 3px; /* REDUCED: Since wrapper has margin, offset can be smaller */
                         /* Total apparent offset = margin + outline-offset */
}
#modal-description-wrapper::-webkit-scrollbar { width: 6px; }
#modal-description-wrapper::-webkit-scrollbar-thumb { background-color: rgba(255,255,255,0.2); border-radius: 3px; }

#modal-event-description { /* The actual <p> tag for static text */
    font-size: 0.95rem;
    line-height: 1.65;
    color: #e0e0e5;
    margin: 0;
    padding: 8px 10px; /* Internal padding for the text */
    white-space: pre-wrap;
    word-wrap: break-word;
    flex-grow: 1; 
}


/* --- Styles for Editable Fields (Consistent Outline) --- */
.editable-field {
    position: relative;
    cursor: pointer;
    display: block; 
    border-radius: 6px; 
    
    outline: 1.5px solid transparent; 
    outline-offset: 5px; /* Default offset for fields not inside a tight margin */
    transition: outline-color 0.2s ease-out;
}

.editable-field:focus, .editable-field:focus-visible {
    outline-color: transparent !important; 
}

#modal-event-title.editable-field { display: block; }
/* #modal-description-wrapper is an .editable-field, handled by its own rule above for margin/offset */
.detail-item span.editable-field { display: block; }


.editable-field:hover:not(.is-editing-field),
.is-editing-field { 
    outline-color: rgba(255, 255, 255, 0.40); 
}
.is-editing-field {
    cursor: default;
}


.editable-input-wrapper {
    position: relative; 
    width: 100%;
    height: 100%; 
    display: flex; 
}

.editable-input {
    flex-grow: 1; 
    width: 100%;
    height: 100%; 
    border: none; 
    font: inherit; 
    color: inherit;
    background-color: transparent; 
    resize: none !important; 
    box-sizing: border-box; 
    
    padding: 6px 8px; /* Default internal padding */
    /* REMOVED default padding-right for buttons, will be handled specifically */
}
.editable-input:focus {
    outline: none; 
}

/* Specific internal padding for inputs */
#modal-event-title.is-editing-field .editable-input {
    font-size: 1.7rem; 
    font-weight: 600;  
    line-height: 1.2; 
    padding: 0; 
    padding-left: 2px; 
    /* No padding-right here if text can flow under buttons */
}

#modal-description-wrapper.is-editing-field .editable-input { /* The textarea */
    font-size: 0.95rem; 
    line-height: 1.65; 
    padding: 8px 10px; /* Match original #modal-event-description's padding */
    /* NO padding-right: 55px; Let text flow under buttons */
    /* padding-bottom is still good to ensure last line isn't hidden by buttons if they are at bottom */
    padding-bottom: 10px; /* Reduce if buttons are small or text is okay closer */
}

.detail-item span.is-editing-field .editable-input {
    font-size: 0.95rem; 
    padding: 2px 4px; 
    /* NO padding-right: 50px; */
    line-height: 1.4; 
}

/* Container for Save/Cancel buttons */
.editable-actions-container {
    position: absolute;
    /* For single-line, might be better slightly offset from text end */
    top: 50%; 
    transform: translateY(-50%);
    right: 8px; /* Consistent right offset */
    display: flex;
    gap: 6px; 
    z-index: 5; 
}
#modal-description-wrapper.is-editing-field .editable-actions-container {
    top: auto; 
    bottom: 10px; /* Position from bottom for textarea */
    right: 10px;
    transform: none; 
}
/* For title, ensure it's not too far if text is short */
#modal-event-title.is-editing-field .editable-actions-container {
    /* Keep default top/transform/right */
    right: 10px; 
}

/* Action Buttons Styling (Glassy Circles) */
.edit-action-button { 
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px; 
    height: 28px;
    border-radius: 50%;
    border: 1px solid rgba(255, 255, 255, 0.2); /* Slightly more visible border for buttons */
    cursor: pointer;
    transition: all 0.15s ease-in-out;
    font-size: 14px; 
    color: rgba(255, 255, 255, 0.85);
    text-shadow: none; 

    background: rgba(140, 140, 145, 0.35); /* Base for glassy button, match modal content more */
    backdrop-filter: blur(8px) saturate(140%);
    -webkit-backdrop-filter: blur(8px) saturate(140%);
    box-shadow: 0 1px 3px rgba(0,0,0,0.12);
}
.edit-action-button:hover {
    color: #fff;
    border-color: rgba(255, 255, 255, 0.4);
    background: rgba(150, 150, 155, 0.45);
    transform: scale(1.08) translateY(-1px); 
    box-shadow: 0 2px 5px rgba(0,0,0,0.18);
}
.edit-action-button:active {
    transform: scale(1.02) translateY(0px);
    background: rgba(130, 130, 135, 0.4);
    box-shadow: 0 1px 2px rgba(0,0,0,0.15);
}

/* ... (Spinner, error messages, responsive rules, RSVP, Attendee, Footer styles remain the same as last version) ... */
.edit-save-btn.is-loading {
    color: transparent !important; 
    pointer-events: none;
    position: relative; /* For spinner positioning */
    background: rgba(150, 150, 155, 0.6); /* Loading state background */
}
.edit-save-btn.is-loading::after {
    content: ''; display: block;
    width: 14px; height: 14px; 
    border-radius: 50%;
    border: 2px solid rgba(255,255,255,0.3);
    border-top-color: rgba(255,255,255,0.9); /* Spinner color */
    animation: spin 0.7s linear infinite;
    position: absolute; top: 50%; left: 50%;
    margin-top: -7px; margin-left: -7px;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Error Message Styling */
.edit-error-message {
    position: absolute; /* Position relative to .editable-input-wrapper */
    bottom: -20px; /* Below the input area */
    left: 0;
    width: 100%;
    color: #ff8a80; /* Softer red for dark backgrounds */
    font-size: 0.8rem;
    text-align: center;
    animation: fadeInSoft 0.3s ease-out;
}
@keyframes fadeInSoft {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
}
.editable-input.input-error-glow {
    /* Using box-shadow for glow as input has no border */
    box-shadow: 0 0 0 2px rgba(255, 100, 100, 0.5) !important; 
}


/* --- Responsive Adjustments --- */
@media (max-width: 768px) {
    .modal-content { padding: 20px 20px; width: calc(100% - 20px); height: calc(100% - 20px); }
    .modal-body { padding: 3px 5px; } /* Less padding for mobile body */
    #modal-description-wrapper { min-height: 80px; margin: 3px; outline-offset: 2px; }
    #modal-event-description { padding: 6px 8px; }
    
    .editable-field { outline-offset: 3px; } 
    
    /* No general padding-right on .editable-input for mobile if text flows under buttons */
    #modal-event-title.is-editing-field .editable-input,
    .modal-header h2, #modal-event-title { font-size: 1.4rem; }
    #modal-event-title.is-editing-field .editable-input { padding: 0 2px; /* padding-right: for buttons */ }

    #modal-description-wrapper.is-editing-field .editable-input {
        padding: 6px 8px; /* padding-right: for buttons */ padding-bottom: 30px; /* Less bottom padding */
    }

    .editable-actions-container { right: 4px; gap: 4px; }
    #modal-description-wrapper.is-editing-field .editable-actions-container { bottom: 5px; right: 5px; }
    .edit-action-button { width: 26px; height: 26px; font-size: 13px; }
}

.rsvp-button-group { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 15px; }
.rsvp-btn { flex-grow: 1; padding: 10px 15px; border: 1px solid rgba(255, 255, 255, 0.25); border-radius: 10px; background-color: rgba(255, 255, 255, 0.08); color: #e0e0e5; font-size: 0.9rem; font-weight: 500; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; gap: 6px; transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.1s ease; min-width: 90px; }
.rsvp-btn:hover { background-color: rgba(255, 255, 255, 0.15); border-color: rgba(255, 255, 255, 0.35); }
.rsvp-btn:active { transform: scale(0.97); }
.rsvp-btn[aria-pressed="true"] { color: #fff; font-weight: 600; }
.rsvp-btn.rsvp-attending[aria-pressed="true"] { background-color: rgba(40, 167, 69, 0.8); border-color: rgba(40, 167, 69, 1); }
.rsvp-btn.rsvp-maybe[aria-pressed="true"] { background-color: rgba(255, 193, 7, 0.8); border-color: rgba(255, 193, 7, 1); color: #212529; }
.rsvp-btn.rsvp-declined[aria-pressed="true"] { background-color: rgba(220, 53, 69, 0.8); border-color: rgba(220, 53, 69, 1); }
.rsvp-btn.rsvp-remove { background-color: rgba(108, 117, 125, 0.6); border-color: rgba(108, 117, 125, 0.8); }
.rsvp-btn.rsvp-remove:hover { background-color: rgba(108, 117, 125, 0.75); border-color: rgba(108, 117, 125, 0.9); }
.rsvp-message { font-size: 0.85rem; margin-top: 12px; text-align: center; color: rgba(255, 255, 255, 0.8); }

.attendee-list-container { max-height: 300px; overflow-y: auto; padding: 8px; margin: 0; border: 1px solid rgba(255, 255, 255, 0.15); border-radius: 10px; background: rgba(0, 0, 0, 0.1); }
.attendee-list-container::-webkit-scrollbar { width: 8px; }
.attendee-list-container::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); border-radius: 10px; margin: 4px 0; }
.attendee-list-container::-webkit-scrollbar-thumb { background-color: rgba(255, 255, 255, 0.3); border-radius: 10px; border: 2px solid transparent; background-clip: content-box; }
.attendee-list-container::-webkit-scrollbar-thumb:hover { background-color: rgba(255, 255, 255, 0.45); }
#modal-attendee-list { list-style: none; padding: 0; margin: 0; }
#modal-attendee-list li { display: flex; align-items: center; padding: 8px 10px; border-radius: 8px; transition: background-color 0.2s ease; }
#modal-attendee-list li:not(:last-child) { margin-bottom: 2px; }
#modal-attendee-list li:hover { background-color: rgba(255, 255, 255, 0.1); }
.attendee-avatar { width: 30px; height: 30px; border-radius: 50%; margin-right: 12px; object-fit: cover; flex-shrink: 0; }
.attendee-name { flex-grow: 1; font-size: 0.9rem; color: #e0e0e5; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-right: 10px; }
#event-details-modal .status-pill { padding: 3px 10px; border-radius: 9999px; font-size: 0.75rem; font-weight: 500; white-space: nowrap; color: #fff; flex-shrink: 0; }
#event-details-modal .status-pill.status-attending { background-color: rgba(40, 167, 69, 0.8); }
#event-details-modal .status-pill.status-maybe { background-color: rgba(255, 193, 7, 0.8); color: #333; }
#event-details-modal .status-pill.status-declined { background-color: rgba(220, 53, 69, 0.8); }
#event-details-modal .status-pill.status-unknown { background-color: rgba(108, 117, 125, 0.8); }
#attendee-list-message, #attendee-loading-indicator { font-size: 0.9rem; color: rgba(255, 255, 255, 0.6); text-align: center; padding: 15px; }

.modal-footer { padding-top: 18px; margin-top: 25px; border-top: 1px solid rgba(255, 255, 255, 0.2); display: flex; justify-content: flex-end; gap: 12px; flex-shrink: 0; }
.admin-action-btn { padding: 9px 18px; border-radius: 12px; cursor: pointer; font-weight: 500; color: #f0f0f5; background-color: rgba(255, 255, 255, 0.15); border: none; transition: background-color 0.2s ease, transform 0.1s ease; text-shadow: none; text-align: center; text-decoration: none; }
.admin-action-btn:hover { background-color: rgba(255, 255, 255, 0.25); }
.admin-action-btn:active { transform: scale(0.97); }
.admin-action-btn.delete-btn { background-color: rgba(220, 53, 69, 0.7); border: none; color: #fff; }
.admin-action-btn.delete-btn:hover { background-color: rgba(220, 53, 69, 0.9); }

/* --- END OF FILE modal.css --- */