{% extends "base.html" %}


{% block content %} 
<!-- Search form -->
<form method="GET" action="{{ url_for('search_users') }}">
    <label for="username">Search for users by username:</label>
    <input type="text" name="username" id="username" placeholder="Enter username" required value="{{ search_query }}">
    <button type="submit">Search</button>
</form>

<!-- Display search results only after submission -->
{% if users is not none %}
    {% if users %}
        <h3>Search Results:</h3>
        <ul>
            {% for user in users %}
                {% if user.username == current_user.username %}
                    <li>{{current_user.username}} - You</li>
                {% endif %}
            {% endfor %}

            <!-- Then display the rest of the users -->
            {% for user in users %}
                {% if user.username != current_user.username %}
                    <li>
                        <!-- Link to user's profile -->
                        <a href="{{ url_for('user', username=user.username) }}">{{ user.username }}</a> 

                        <!-- Link to message user -->
                        <a href="{{ url_for('send_message', recipient=user.username) }}">Message</a>

                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    {% else %}
        <p>No users found with that username.</p>
    {% endif %}
{% endif %}

{% endblock %}